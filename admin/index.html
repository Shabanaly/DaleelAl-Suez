<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø³ÙˆÙŠØ³</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Core CSS -->
    <link rel="stylesheet" href="css/layouts/admin-layout.css">
    <!-- Legacy Admin CSS (To be phased out) -->
    <link rel="stylesheet" href="css/admin.css">

    <!-- Libraries -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Config -->
    <script src="../common/config/config.js"></script>
    <script src="../common/i18n/i18n.js"></script>

    <!-- Services -->
    <script src="services/supabase.js"></script>
    <script src="services/auth.service.js"></script>

    <!-- Utils -->
    <script src="utils/drawer.js"></script>

    <!-- Components (Legacy) -->
    <script src="components/sidebar.js"></script>
    <script src="components/topbar.js"></script>

    <!-- Core Architecture -->
    <script src="js/core/layout-renderer.js"></script>
    <script src="js/core/router.js"></script>

    <script src="services/stats.service.js"></script>
    <script src="services/places.service.js"></script>
    <script src="services/categories.service.js"></script>
    <script src="services/upload.service.js"></script>

    <!-- Phase 2: Places Module -->
    <script src="js/features/places/places.ui.js"></script>
    <script src="js/features/places/places.controller.js"></script>

    <!-- Phase 3: Categories Module -->
    <script src="js/features/categories/categories.ui.js"></script>
    <script src="js/features/categories/categories.controller.js"></script>
    <script src="js/features/categories/subcategories.ui.js"></script>
    <script src="js/features/categories/subcategories.controller.js"></script>

    <!-- Phase 4: Home Module -->
    <script src="js/features/home/home.ui.js"></script>
    <script src="js/features/home/home.controller.js"></script>

    <!-- Auth Guard -->
    <script>
        // Simple Auth Check before routing
        if (!AuthService.isAuthenticated()) {
            window.location.href = 'login.html';
        }
    </script>
</head>
<body>
    <div id="app">
        <!-- SPA Mount Point -->
    </div>

    <script>
        // App Initialization
        document.addEventListener('DOMContentLoaded', async () => {
            console.log("ðŸš€ Initializing Admin Panel (Clean Arch)...");
            
            // 1. Initialize Layout
            LayoutRenderer.renderMainLayout();

            // 2. Initialize Router (starts handling URL)
            await AdminRouter.init();

            // 3. Init Icons
            lucide.createIcons();
        });
    </script>
</body>
</html>
