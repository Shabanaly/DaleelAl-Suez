/**
 * Home UI Renderer (Dashboard)
 */
const HomeUI = {
    render: (stats, recentItems, user) => {
        const userName = user ? user.email.split('@')[0] : "Admin";
        
        return `
            <div class="page-header">
                <div>
                    <h2 class="page-title">لوحة التحكم</h2>
                    <p class="text-muted">نظرة عامة على إحصائيات التطبيق</p>
                </div>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon bg-primary-light text-primary">
                        <i data-lucide="map-pin"></i>
                    </div>
                    <div>
                        <div class="stat-value">${stats.totalPlaces}</div>
                        <div class="stat-label">إجمالي الأماكن</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon bg-success-light text-success">
                        <i data-lucide="layers"></i>
                    </div>
                    <div>
                        <div class="stat-value">${stats.mainCategories}</div>
                        <div class="stat-label">الأقسام</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon bg-warning-light text-warning">
                        <i data-lucide="users"></i>
                    </div>
                    <div>
                        <div class="stat-value">${userName}</div>
                        <div class="stat-label">المستخدم (Admin)</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon bg-info-light text-info">
                        <i data-lucide="clock"></i>
                    </div>
                    <div>
                        <div class="stat-value">${stats.addedToday}</div>
                        <div class="stat-label">أضيف اليوم</div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="card mt-4">
                <div class="card-header">
                    <h3>أحدث الإضافات</h3>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>الاسم</th>
                            <th>القسم</th>
                            <th>تاريخ الإضافة</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${recentItems.length ? recentItems.map(i => `
                            <tr>
                                <td class="fw-bold">${i.name_ar}</td>
                                <td><span class="badge">${i.main_cat_id || '-'}</span></td>
                                <td dir="ltr" class="text-end">${new Date(i.created_at).toLocaleDateString('ar-EG')}</td>
                            </tr>
                        `).join('') : '<tr><td colspan="3" class="text-center">لا توجد بيانات حديثة</td></tr>'}
                    </tbody>
                </table>
            </div>

                .stats-grid {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
                    gap: 24px;
                    margin-bottom: 24px;
                }
                .stat-card {
                    background: var(--bg-surface);
                    padding: 24px;
                    border-radius: 16px;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                    border: 1px solid var(--border-color, #e5e7eb);
                    display: flex;
                    align-items: center;
                    gap: 16px;
                    transition: transform 0.2s;
                }
                .stat-card:hover { transform: translateY(-4px); }
                
                .stat-icon {
                    width: 56px;
                    height: 56px;
                    border-radius: 12px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                }
                
                .bg-primary-light { background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%); }
                .bg-success-light { background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%); }
                .bg-warning-light { background: linear-gradient(135deg, #ca8a04 0%, #eab308 100%); }
                .bg-info-light { background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%); }
                
                .text-primary, .text-success, .text-warning, .text-info { color: white !important; }

                .stat-value { font-size: 28px; font-weight: 800; color: var(--text-main); line-height: 1; margin-bottom: 4px; }
                .stat-label { font-size: 14px; color: #6b7280; font-weight: 500; }
                
                .card-header { 
                    padding-bottom: 16px; 
                    border-bottom: 1px solid var(--border-color, #e5e7eb); 
                    margin-bottom: 16px; 
                }
                .card-header h3 { margin: 0; font-size: 18px; color: var(--text-main); font-weight: 700; }
            </style>
        `;
    }
};

window.HomeUI = HomeUI;
