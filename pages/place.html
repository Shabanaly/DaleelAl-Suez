<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليل السويس</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="../js/config.js"></script>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <script src="../js/theme.js"></script>
    <script src="../js/i18n.js"></script>
</head>
<body id="place-details-page">
    <!-- Overlay for Lightbox (Optional/Native) -->
    <div id="lightbox-overlay" class="lightbox-overlay" onclick="closeLightbox()">
        <img id="lightbox-img" src="" alt="">
    </div>

    <!-- Universal header -->
    <header class="site-header">
        <a href="../index.html" class="logo">
            <i data-lucide="compass"></i>
            <span data-i18n="app_name">دليل <span>السويس</span></span>
        </a>
        <nav class="top-nav">
            <a href="../index.html" class="top-nav-link" data-i18n="nav_home">الرئيسية</a>
            <a href="categories.html" class="top-nav-link" data-i18n="nav_categories">الأقسام</a>
            <a href="favorites.html" class="top-nav-link" data-i18n="nav_favorites">المفضلة</a>
            <button class="top-nav-link" onclick="toggleLanguage()" id="lang-toggle">English</button>
            <button class="theme-toggle-btn" onclick="toggleTheme()" id="theme-toggle">
                <i data-lucide="sun" class="theme-toggle-icon"></i>
            </button>
        </nav>
    </header>

    <!-- Global Back Action (Top of Page) -->
    <div class="top-page-actions">
        <a href="javascript:history.back()" class="back-link-modern">
            <i data-lucide="chevron-right"></i> <span data-i18n="nav_back">العودة</span>
        </a>
    </div>

    <!-- Magazine Layout Container -->
    <main class="magazine-layout">
        
        <!-- 1. Hero Image (Pinned at top on mobile) -->
        <div class="details-hero-box">
            <img id="place-hero-img" src="" alt="" class="details-hero-img">
            <div class="hero-scroll-indicator">
                <i data-lucide="mouse-pointer-2"></i>
            </div>
        </div>

        <!-- 2. Sidebar (Moved under hero on mobile) -->
        <aside class="details-sidebar">
            <div class="sidebar-sticky-content">
                <div class="place-meta-header">
                    <div class="badge-row">
                        <span class="badge highlight"><i data-lucide="star"></i> مميز</span>
                    </div>
                    <h1 id="place-name" class="place-main-title">...</h1>
                    <div id="place-category-badge" class="category-badge">...</div>
                </div>

                <div class="sidebar-info-grid" id="place-info-grid">
                    <!-- JS Populates this -->
                </div>

                <div class="sidebar-actions">
                    <button class="btn-primary-modern share-btn" onclick="sharePlace()">
                        <i data-lucide="share-2"></i> <span>مشاركة المكان</span>
                    </button>
                    <div id="favorite-btn-container">
                        <!-- JS if needed or static -->
                    </div>
                </div>

                <!-- AD Slot: Sidebar -->
                <div class="ad-slot" data-ad-slot="details_sidebar" style="margin-top:24px; display:none;"></div>
            </div>
        </aside>

        <!-- 3. Right Content Area (Scrollable) -->
        <section class="details-content-area">
            
            <!-- Full Content Card -->
            <div class="details-article">
                <div class="article-section">
                    <h2 class="section-heading"><i data-lucide="align-right"></i> عن المكان</h2>
                    <p id="place-description" class="article-text"></p>
                </div>

                <div id="map-section" class="article-section" style="display: none;">
                    <h2 class="section-heading"><i data-lucide="map"></i> الموقع على الخريطة</h2>
                    <div id="map-iframe-container" class="map-box-modern">
                        <!-- Iframe by JS -->
                    </div>
                </div>

                <!-- AD Slot: Middleware -->
                <div class="ad-slot" data-ad-slot="details_middle" style="margin:24px 0; display:none;"></div>

                <div id="gallery-section" class="article-section" style="display: none;">
                    <h2 class="section-heading"><i data-lucide="images"></i> معرض الصور</h2>
                    <div class="magazine-gallery" id="place-gallery">
                        <!-- Gallery Grid by JS -->
                    </div>
                </div>
            </div>

        </section>

    </main>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-brand">
                <h4 data-i18n="app_name">دليل السويس</h4>
                <p data-i18n="footer_desc">المنصة الأكبر والأكثر موثوقية لاكتشاف مدينة السويس.</p>
            </div>
        </div>
        <div class="footer-bottom"><p data-i18n="footer_copyright">© 2025 دليل السويس.</p></div>
    </footer>

    <nav class="bottom-nav" id="bottom-nav-container"></nav>

    <script>lucide.createIcons();</script>
    <script src="../js/favorites.js"></script>
    <script src="../js/services/places.service.js"></script>
    <script src="../js/services/categories.service.js"></script>
    <script src="../js/main.js"></script>
    <script>
        function sharePlace() {
            if (navigator.share) {
                navigator.share({
                    title: document.getElementById('place-name').innerText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                alert('تم نسخ الرابط!');
            }
        }
    </script>
</body>
</html>
